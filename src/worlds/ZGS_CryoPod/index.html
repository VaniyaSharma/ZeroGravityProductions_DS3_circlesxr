<html>
  <head>
    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts />

    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    <script src="scripts/carry-manager.js"></script>
    <script src="scripts/flashlight.js"></script>
  </head>
  <body>
    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui />

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties>
      <a-assets>
        <!-- 360 -->
        <img
          id="link_1_360"
          src="/global/images/ZGS_room1.jpg"
          crossorigin="anonymous"
        />

        <a-asset-item
          id="enviro-gltf"
          src="assets/Cryo-Walls.glb"
          response-type="arraybuffer"
        ></a-asset-item>
        <a-asset-item
          id="cryoPods_glb"
          src="assets/Cryo-Props.glb"
          response-type="arraybuffer"
        ></a-asset-item>

        <a-asset-item
          id="nav_gltf"
          src="assets/Cryo-NavMesh.glb"
          crossorigin="anonymous"
        ></a-asset-item>
        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets />
      </a-assets>

      <a-entity id="GameManager" carry-manager></a-entity>

      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar />

      <!-- links to other worlds -->
      <a-entity
        id="link_1"
        position="-0.2 1 5"
        rotation="0 90 0"
        scale="0.100 0.950 1.010"
        circles-portal="img_src:#link_1_360; title_text:Suburbia; link_url:/w/ZGS"
        shadow
      ></a-entity>
      <!-- environment -->
      <!-- the environment -->
      <a-entity
        gltf-model="#enviro-gltf"
        shadow="receive: true; cast: true"
      ></a-entity>

      <a-entity
        gltf-model="#cryoPods_glb"
        shadow="receive: true; cast: true"
      ></a-entity>
      <a-entity environment="preset:yavapai"></a-entity>

      <a-entity
        position="0 0 0"
        id="navmesh"
        gltf-model="#nav_gltf"
        visible="true"
        nav-mesh
      ></a-entity>

      <!-- Light -->
      <a-entity
      light="type: point; color: #FFA200; intensity: 3.5; distance: 20.0; castShadow: true; shadowMapHeight: 256; shadowMapWidth: 256;"
      animation="property:light.intensity; dur:293; dir:alternate; to:3.6; loop:true; easing:easeInOutExpo"
      position="-0.59 2.7 0"
      ></a-entity>
    </a-scene>
    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts />
  </body>
</html>
