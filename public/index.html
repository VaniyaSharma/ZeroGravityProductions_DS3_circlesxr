<html>
    <head>
        <title>A-Frame Introduction!</title>
        <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
        <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
        
        <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
   

    </head>
    <body>
        <a-scene physics="driver: local; debug: true; gravity: 0 -9.8 0;">
            <a-assets>
                <audio id="space_music" src="assets/sounds/SpaceMusic.mp3" preload="auto" crossorigin="anonymous"></audio>
                <a-asset-item id="navmesh-model" src="assets/models/navmesh.glb"></a-asset-item>
            </a-assets>

            <a-entity id="navmesh" nav-mesh visible="false" gltf-model="#navmesh-model" scale="0.170 0.500 0.160"></a-entity>

            <a-entity id="rig" movement-controls="constrainToNavMesh: true">
                <a-entity id="mainCam" 
                    camera 
                    look-controls 
                    position="0 1.6 0"
                    cursor="rayOrigin: mouse"
                    raycaster="objects: .clickable; showLine: false; far: 5"
                    >
                </a-entity>


           <a-entity id="flashlight" position="0.5 -0.5 0" light="type:spot; intensity:1.4; castShadow:true; angle:40.0; penumbra:0.3;"></a-entity>
                </a-entity>
            </a-entity>
        </a-entity>
            

            <a-entity id="bg_music" sound="src:#space_music; autoplay:true;"></a-entity>

            <a-entity id="room">
                <a-entity class="ground" 
                    geometry="primitive:plane; width:14; height:14;" 
                    material="color:white;" 
                    position="0 0.01 0" 
                    rotation="-90 0 0" 
                    shadow="cast:false; receive:true;" 
                    static-body></a-entity>

                <a-entity class="wall" geometry="primitive:plane; width:30; height:3;" material="color:white;" position="15 8 0"  rotation="0 -90 0" shadow="cast:false; receive:true;"></a-entity>
                <a-entity class="wall" geometry="primitive:plane; width:30; height:3;" material="color:white;" position="-15 8 0" rotation="0 90 0" shadow="cast:false; receive:true;"></a-entity>
                <a-entity class="wall" geometry="primitive:plane; width:30; height:3;" material="color:white;" position="0 8 15"  rotation="0 180 0" shadow="cast:false; receive:true;"></a-entity>
                <a-entity class="wall" geometry="primitive:plane; width:30; height:3;" material="color:white;" position="0 8 -15" rotation="0 0 0" shadow="cast:false; receive:true;"></a-entity>
            </a-entity>

            <a-entity environment="preset:starry;"></a-entity>
            <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
        </a-scene>
    </body>

    <!--ignore this-->
    <!--<script>
        AFRAME.registerComponent('grab-on-click', {
            init: function () {
                let el = this.el;
                let isGrabbed = false;
                let cam = document.querySelector('#mainCam');
    
                el.addEventListener('click', function () {
                    if (!isGrabbed) {
                        // Pick up object
                        el.setAttribute('position', cam.getAttribute('position'));
                        el.setAttribute('dynamic-body', 'mass: 0'); // Disable physics
                        el.setAttribute('grabbable', ''); // Enable grabbable
                        isGrabbed = true;
                    } else {
                        // Drop object
                        el.setAttribute('dynamic-body', 'mass: 1'); // Re-enable physics
                        isGrabbed = false;
                    }
                });
            }
        });
    </script>-->
    
      
</html>